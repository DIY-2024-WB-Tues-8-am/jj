<!DOCTYPE html>
<html>

<head>
    <!-- Metadata section -->
    <title>Skin Health Survey</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <style>
        /* Blue and yellow design features */
        body {
            background-color: #f4f4f4;
        }

        .w3-blue {
            background-color: #007bff !important;
            color: white !important;
        }

        .w3-yellow {
            background-color: #ffc107 !important;
            color: black !important;
        }

        .w3-border-yellow {
            border-color: #ffc107 !important;
        }

        .w3-text-yellow {
            color: #ffc107 !important;
        }

        .w3-hover-blue:hover {
            background-color: #007bff !important;
            color: white !important;
        }

        .w3-hover-yellow:hover {
            background-color: #ffc107 !important;
            color: black !important;
        }
    </style>
</head>

<body>
    <!-- Survey section -->
    <div class="w3-container w3-blue">
        <h2>Skin Health Survey</h2>
    </div>

    <div class="w3-container">
        <form id="surveyForm">
            <div class="w3-row-padding">
                <div class="w3-half">
                    <p>Do you have a mole?</p>
                    <label class="w3-text-yellow">
                        <input class="w3-radio" type="radio" name="mole" value="yes">
                        <span>Yes</span>
                    </label>
                    <label class="w3-text-yellow">
                        <input class="w3-radio" type="radio" name="mole" value="no">
                        <span>No</span>
                    </label>
                </div>

                <div class="w3-half">
                    <p>Do you use SPF daily?</p>
                    <label class="w3-text-yellow">
                        <input class="w3-radio" type="radio" name="spf" value="yes">
                        <span>Yes</span>
                    </label>
                    <label class="w3-text-yellow">
                        <input class="w3-radio" type="radio" name="spf" value="no">
                        <span>No</span>
                    </label>
                </div>
            </div>

            <div class="w3-row-padding">
                <div class="w3-half">
                    <p>Have you been using a tanning bed?</p>
                    <label class="w3-text-yellow">
                        <input class="w3-radio" type="radio" name="tanning" value="yes">
                        <span>Yes</span>
                    </label>
                    <label class="w3-text-yellow">
                        <input class="w3-radio" type="radio" name="tanning" value="no">
                        <span>No</span>
                    </label>
                </div>

                <div class="w3-half">
                    <p>Do you have a family history of melanoma?</p>
                    <label class="w3-text-yellow">
                        <input class="w3-radio" type="radio" name="melanoma" value="yes">
                        <span>Yes</span>
                    </label>
                    <label class="w3-text-yellow">
                        <input class="w3-radio" type="radio" name="melanoma" value="no">
                        <span>No</span>
                    </label>
                </div>
            </div>
        </form>
    </div>

    <div class="w3-container w3-blue">
        <button class="w3-button w3-hover-yellow" onclick="submitSurvey()">Submit</button>
    </div>

    <!-- Image upload section -->
    <div id="imageUpload" class="w3-container" style="display: none;">
        <h2>Upload Image for Comparison</h2>
        <input type="file" id="fileInput" accept="image/*">
        <canvas id="canvas" width="600" height="500"></canvas>
        <div id="messageDisplayArea"></div>
    </div>

    <!-- JavaScript section -->
    <script>
        // Function to submit the survey
        function submitSurvey() {
            var form = document.getElementById("surveyForm");
            var mole = form.elements["mole"].value;
            var spf = form.elements["spf"].value;
            var tanning = form.elements["tanning"].value;
            var melanoma = form.elements["melanoma"].value;

            // Calculate the scores
            var malignantScore = 0;
            var benignScore = 0;
            if (mole === "yes") malignantScore++;
            else benignScore++;
            if (spf === "no") malignantScore++;
            else benignScore++;
            if (tanning === "yes") malignantScore++;
            else benignScore++;
            if (melanoma === "yes") malignantScore++;
            else benignScore++;

            // Show image upload section
            var surveyDiv = document.getElementById("imageUpload");
            surveyDiv.style.display = "block";

            // Display scores (for testing)
            console.log("Malignant Score:", malignantScore);
            console.log("Benign Score:", benignScore);
        }

        // Image upload handling (similar to previous code)
        window.onload = function () {
            var fileInput = document.getElementById('fileInput');
            var messageDisplayArea = document.getElementById('messageDisplayArea');
            var canvas = document.getElementById('canvas');
            var context = canvas.getContext('2d');

            fileInput.addEventListener('change', function (e) {
                var file = fileInput.files[0];
                var imageType = /image.*/;

                if (file.type.match(imageType)) {
                    var reader = new FileReader();
                    reader.onload = function (e) {
                        messageDisplayArea.innerHTML = "You picked an image!";
                        var img = new Image();
                        img.onload = function () {
                            drawImageIOSFix(context, img, 0, 0, img.naturalWidth, img.naturalHeight, 0, 0, 600, 500);
                        };
                        img.src = reader.result;
                    };
                    reader.readAsDataURL(file);
                } else {
                    messageDisplayArea.innerHTML = "Please select an image file.";
                }
            });
        };
    </script>
</body>

</html>
