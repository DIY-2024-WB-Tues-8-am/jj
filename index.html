<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Photo Transform</title>
  <meta name="viewport" content="width=device-width, initial-scale=.7">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <link rel="stylesheet" href="https://code.jquery.com/mobile/1.3.2/jquery.mobile-1.3.2.min.css" />
  <script src="https://code.jquery.com/jquery-1.9.1.min.js"></script>
  <script src="https://code.jquery.com/mobile/1.3.2/jquery.mobile-1.3.2.min.js"></script>
</head>
<body>
  <input type="file" id="fileInput" accept="image/*">
  <canvas id="canvas" width="600" height="500"></canvas>
  <div id="messageDisplayArea"></div>

  <script>
    var docMod = document.lastModified;
    console.log("This file last modified  " + docMod);

    function detectVerticalSquash(img) {
      // Function implementation remains the same
    }

    function drawImageIOSFix(ctx, img, sx, sy, sw, sh, dx, dy, dw, dh) {
      // Function implementation remains the same
    }

    window.onload = function() {
      var fileInput = document.getElementById('fileInput');
      var messageDisplayArea = document.getElementById('messageDisplayArea');
      var canvas = document.getElementById('canvas');
      var context = canvas.getContext('2d');

      fileInput.addEventListener('change', function(e) {
        var file = fileInput.files[0];
        var imageType = /image.*/;
        
        if (file.type.match(imageType)) {
          var reader = new FileReader();
          reader.onload = function(e) {
            messageDisplayArea.innerHTML = "You picked an image!";
            var img = new Image();
            img.onload = function() {
              drawImageIOSFix(context, img, 0, 0, img.naturalWidth, img.naturalHeight, 0, 0, 600, 500);
            };
            img.src = reader.result;
          };
          reader.readAsDataURL(file);
        } else {
          messageDisplayArea.innerHTML = "Please select an image file.";
        }
      });
    };
  </script>
</body>
</html>
